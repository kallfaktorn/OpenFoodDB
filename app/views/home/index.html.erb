


    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>


    <p align="middle">
      <%= link_to image_tag('OpenFoodDBLogo.png'); %>
    </p>

<table align="center">
  <tr>
    <td>
      <%= form_tag food_stuffs_path, :id => 'food_stuffs_form', :method => 'get', :remote => true do %>
        <%= text_field_tag :search, params[:search] %>
        <%= submit_tag t(:Home_Index_Button_Search), :name => nil %>
      <% end %>
    </td>
  </tr>
</table>
  <div id="food_stuffs", class="food_stuff_links">
  </div>

<script type="text/javascript">
  $('#food_stuffs_form').bind('ajax:success', function(evt, data) {

    var food_stuffs_div = $('#food_stuffs');
    food_stuffs_div.empty();

    var food_stuffs = data;

    if(food_stuffs.length == 1) {
      window.location.href = "/food_stuffs/" + 
      food_stuffs[0].id + window.location.search;
    }
    else {
      for(i in food_stuffs) {
        var food_stuff_anchor = "<a>" + food_stuffs[i].name + "</a>";
        var url = "/food_stuffs/" + food_stuffs[i].id +
         window.location.search;
         
         alert("window.location: " + window.location + "\n" +
      	"window.location.hash: " + window.location.hash + "\n" +
      	"window.location.host: " + window.location.host + "\n" +
      	"window.location.hostname: " + window.location.hostname + "\n" +
      	"window.location.href: " + window.location.href + "\n" + 
      	"window.location.pathname: " + window.location.pathname + "\n" + 
      	"window.location.port: " + window.location.port + "\n" + 
      	"window.location.protocol: " + window.location.protocol + "\n" +
      	"window.location.search: " + window.location.search);

        food_stuffs_div.append("<br>");
        food_stuff_anchor = $(food_stuff_anchor).attr("href", url);
        food_stuffs_div.append(food_stuff_anchor);
      }
    }
  });
</script>